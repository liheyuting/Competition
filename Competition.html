<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025å¹´Q4 åŒ»ç–—è®¾å¤‡å¸‚åœºåˆ†ææŠ¥å‘Š</title>
    
    <!-- åŠ è½½ Tailwind CSS æ¡†æ¶ -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- åŠ è½½ Chart.js å›¾è¡¨åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- åŠ è½½å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Chosen Palette: Warm Neutral Professional. Background #F9FAFB, Accents #0F766E -->
    <!-- Application Structure Plan: Master-Detail dashboard for Market and Competition analysis. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body { 
            font-family: 'Noto Sans SC', sans-serif; 
            background-color: #F9FAFB; 
            color: #374151; 
        }
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 600px; 
            margin: auto; 
            height: 350px; 
            max-height: 400px;
        }
        .active-tab { 
            background-color: #0F766E; 
            color: white; 
            border-bottom: 3px solid #134E4A; 
        }
        .inactive-tab { 
            background-color: white; 
            color: #4B5563; 
        }
        .fade-in { 
            animation: fadeIn 0.5s ease-in; 
        }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(5px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .loading-shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer { from { background-position: 200% 0; } to { background-position: -200% 0; } }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-6 flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-gray-900 tracking-tight">2025 Q4 åŒ»ç–—è®¾å¤‡æŠ¥å‘Š <span class="text-teal-600 text-xl">æ™ºèƒ½å¢å¼ºç‰ˆ</span></h1>
                <p class="text-sm text-gray-500 mt-1">æ·±åº¦æ´å¯Ÿ MarCom ä¼ æ’­ç­–ç•¥ä¸å¸‚åœºå‡†å…¥è¶‹åŠ¿</p>
            </div>
            <div class="mt-4 md:mt-0 flex space-x-2">
                <button onclick="generateSummary()" class="px-5 py-2 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition font-medium flex items-center">
                    <span class="mr-2">âœ¨</span> AI æ™ºèƒ½æ€»ç»“
                </button>
            </div>
        </div>
    </header>

    <!-- å¯¼èˆªåˆ‡æ¢ -->
    <nav class="bg-white shadow sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 flex justify-center">
            <button id="nav-market" onclick="switchView('market')" class="active-tab py-4 px-10 font-medium text-lg w-1/2 md:w-auto transition-all">ğŸ“Š å¸‚åœºåŠ¨æ€</button>
            <button id="nav-competition" onclick="switchView('competition')" class="inactive-tab py-4 px-10 font-medium text-lg w-1/2 md:w-auto transition-all">ğŸ† ç«å“åˆ†æ</button>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="flex-grow py-8 px-4">
        <div id="app-content" class="max-w-7xl mx-auto">
            <!-- JavaScript å°†åœ¨æ­¤å¤„æ¸²æŸ“å†…å®¹ -->
        </div>
    </main>

    <!-- AI å¼¹çª— -->
    <div id="ai-modal" class="fixed inset-0 bg-black/50 z-[100] hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl flex flex-col max-h-[85vh]">
            <div class="p-4 border-b flex justify-between items-center bg-indigo-50 rounded-t-2xl">
                <h3 class="font-bold text-indigo-900 flex items-center"><span class="mr-2">âœ¨</span> Gemini æ™ºèƒ½å†³ç­–åŠ©æ‰‹</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-black transition">âœ•</button>
            </div>
            <div id="ai-content" class="p-8 overflow-y-auto text-gray-700 leading-relaxed space-y-4 text-lg">
                <!-- AI ç”Ÿæˆçš„å†…å®¹ -->
            </div>
            <div class="p-4 bg-gray-50 border-t text-right rounded-b-2xl">
                <button onclick="closeModal()" class="px-8 py-2 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-100 transition font-medium">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="bg-white border-t py-8 text-center">
        <p class="text-gray-500 text-sm">Â© 2025 åŒ»ç–—å™¨æ¢°å¸‚åœºç ”ç©¶å°ç»„ | æœ¬æŠ¥å‘Šç”± Gemini 2.5 è¾…åŠ©åˆ†æç”Ÿæˆ</p>
    </footer>

    <script>
        // é…ç½®ä¸æ•°æ®
        const apiKey = ""; // ç¯å¢ƒè‡ªåŠ¨å¡«å……
        const modelId = "gemini-2.5-flash-preview-09-2025";
        let currentState = { view: 'market', selectedComp: 'philips' };

        const reportData = {
            market: {
                intro: "2025å¹´Q4ï¼Œä¸­å›½å¸‚åœºå—â€œæŠ€è€—åˆ†ç¦»â€ä¸â€œæŒ‰æ•ˆæœå®šä»·â€æ”¿ç­–æ·±åº¦å½±å“ï¼Œå½±åƒè®¾å¤‡å¸‚åœºè¿›å…¥å­˜é‡åšå¼ˆä¸é«˜ç«¯åŒ–è½¬å‹çš„å…³é”®æœŸã€‚",
                items: [
                    { title: "AI åŒ»ç–—åŸºå»º", icon: "ğŸ¤–", desc: "è¾…åŠ©è¯Šæ–­è½¯ä»¶æ­£å¼çº³å…¥åŒ»ä¿æ”¯ä»˜ç›®å½•ï¼Œå¸¦åŠ¨è®¾å¤‡æ•°æ™ºåŒ–å‡çº§ã€‚" },
                    { title: "æœ¬åœŸåŒ– 3.0", icon: "ğŸ­", desc: "è·¨å›½å‚å•†ä¸ä»…åœ¨åç”Ÿäº§ï¼Œæ›´åœ¨åç ”å‘ï¼Œä»¥åº”å¯¹æ›´ä¸¥æ ¼çš„é‡‡è´­è§„åˆ™ã€‚" },
                    { title: "å®šä»·æ–°æ”¿", icon: "ğŸ’°", desc: "å¿ƒè„ MRIã€å…‰å­è®¡æ•° CT ç­‰é«˜ç«¯é¡¹ç›®è·æ‰¹ç‰¹éœ€å®šä»·ã€‚"}
                ],
                stats: { labels: ['AI é©±åŠ¨', 'æœ¬åœŸåŒ–ç­–ç•¥', 'æˆæœ¬æ§è´¹', 'æŠ€æœ¯æ›¿ä»£'], data: [35, 30, 20, 15] }
            },
            competition: {
                philips: { name: "é£åˆ©æµ¦ (PHILIPS)", focus: "å…‰è°± CT é¢†å¯¼åŠ›ï¼ŒAI èµ‹èƒ½å¥åº·ç§‘æŠ€", products: ["CT7600", "Azurion"], scores: [9, 8, 9, 7, 6] },
                ge: { name: "GE åŒ»ç–— (GEHC)", focus: "å…¨å‘¨æœŸç²¾å‡†åŒ»ç–—ï¼Œéå…¬å¸‚åœºæ¸—é€", products: ["Apex Quantum", "SIGNA Hero"], scores: [8, 9, 9, 9, 7] },
                siemens: { name: "è¥¿é—¨å­ (SIEMENS)", focus: "å…‰å­è®¡æ•° CT æ ‡æ†ï¼ŒESG ç»¿è‰²åŒ»ç–—", products: ["NAEOTOM Alpha", "Free.Max"], scores: [8, 8, 8, 10, 6] },
                united: { name: "è”å½±åŒ»ç–— (UI)", focus: "å›½äº§é«˜ç«¯çªç ´ï¼Œäº§ç ”åŒ»æ·±åº¦ååŒ", products: ["uMR Jupiter", "uCT 960+"], scores: [9, 10, 6, 9, 8] }
            }
        };

        // API è°ƒç”¨å‡½æ•°
        async function fetchAIAnalysis(prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${modelId}:generateContent?key=${apiKey}`;
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const result = await response.json();
                return result.candidates[0].content.parts[0].text;
            } catch (err) {
                return "æŠ±æ­‰ï¼Œåˆ†æå¼•æ“ç›®å‰å¿™ç¢Œï¼Œè¯·ç¨åå†è¯•ã€‚";
            }
        }

        // è§†å›¾åˆ‡æ¢
        function switchView(view) {
            currentState.view = view;
            document.getElementById('nav-market').className = view === 'market' ? 'active-tab py-4 px-10 font-medium text-lg w-1/2 md:w-auto transition-all' : 'inactive-tab py-4 px-10 font-medium text-lg w-1/2 md:w-auto transition-all';
            document.getElementById('nav-competition').className = view === 'competition' ? 'active-tab py-4 px-10 font-medium text-lg w-1/2 md:w-auto transition-all' : 'inactive-tab py-4 px-10 font-medium text-lg w-1/2 md:w-auto transition-all';
            render();
        }

        // æ¸²æŸ“ä¸»å‡½æ•°
        function render() {
            const container = document.getElementById('app-content');
            container.innerHTML = '';
            container.classList.add('fade-in');

            if (currentState.view === 'market') {
                renderMarket(container);
            } else {
                renderCompetition(container);
            }
        }

        function renderMarket(container) {
            container.innerHTML = `
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 mb-8 flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-4 md:mb-0">
                        <h2 class="text-xl font-bold text-gray-800">ğŸ“Œ å¸‚åœºç»¼è¿°</h2>
                        <p class="text-gray-600 mt-2">${reportData.market.intro}</p>
                    </div>
                    <button onclick="marketDeepDive()" class="px-6 py-3 bg-teal-50 text-teal-700 rounded-xl font-bold hover:bg-teal-100 transition border border-teal-200">âœ¨ æ·±åº¦è¶‹åŠ¿æ¨æ¼”</button>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2 space-y-6">
                        ${reportData.market.items.map(i => `
                            <div class="bg-white p-6 rounded-2xl shadow-sm border-l-4 border-teal-500 hover:shadow-md transition">
                                <div class="flex items-center">
                                    <span class="text-3xl mr-4">${i.icon}</span>
                                    <div>
                                        <h3 class="font-bold text-lg">${i.title}</h3>
                                        <p class="text-sm text-gray-500 mt-1">${i.desc}</p>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="bg-white p-8 rounded-2xl shadow-sm flex flex-col items-center">
                        <h3 class="font-bold mb-6 text-gray-800">Q4 è¡Œä¸šé©±åŠ¨åŠ›å æ¯”</h3>
                        <div class="chart-container">
                            <canvas id="marketChart"></canvas>
                        </div>
                    </div>
                </div>
            `;
            initMarketChart();
        }

        function renderCompetition(container) {
            const compKeys = Object.keys(reportData.competition);
            const active = reportData.competition[currentState.selectedComp];

            container.innerHTML = `
                <div class="flex flex-wrap gap-2 mb-6">
                    ${compKeys.map(k => `
                        <button onclick="currentState.selectedComp='${k}';render();" 
                                class="px-6 py-3 rounded-xl font-bold transition-all ${currentState.selectedComp === k ? 'bg-teal-600 text-white shadow-lg' : 'bg-white text-gray-500 hover:bg-gray-100'}">
                            ${reportData.competition[k].name}
                        </button>
                    `).join('')}
                </div>
                <div class="bg-white p-8 rounded-2xl shadow-sm grid grid-cols-1 lg:grid-cols-2 gap-10">
                    <div class="space-y-8">
                        <div>
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-3xl font-bold text-gray-900">${active.name}</h2>
                                <button onclick="competitorDeepDive('${active.name}')" class="text-sm px-4 py-2 bg-indigo-50 text-indigo-700 rounded-lg hover:bg-indigo-100 font-bold transition">âœ¨ æˆ˜ç•¥æ¨æ¼”</button>
                            </div>
                            <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                                <h4 class="font-bold text-teal-800 mb-2">ğŸ“¢ ä¼ æ’­ç„¦ç‚¹ (MarCom Focus)</h4>
                                <p class="text-gray-700 leading-relaxed">${active.focus}</p>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-900 mb-3">ğŸ†• æ ¸å¿ƒäº§å“ (Key NPIs)</h4>
                            <div class="flex flex-wrap gap-3">
                                ${active.products.map(p => `<span class="px-4 py-2 bg-blue-50 text-blue-700 rounded-lg font-bold text-sm border border-blue-100">${p}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-2xl flex flex-col items-center">
                        <h4 class="font-bold mb-4 text-gray-700">æˆ˜ç•¥ç«äº‰åŠ›æ¨¡å‹</h4>
                        <div class="chart-container">
                            <canvas id="compChart"></canvas>
                        </div>
                    </div>
                </div>
            `;
            initCompChart(active);
        }

        // å›¾è¡¨åˆå§‹åŒ–
        function initMarketChart() {
            setTimeout(() => {
                const ctx = document.getElementById('marketChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: reportData.market.stats.labels,
                        datasets: [{
                            data: reportData.market.stats.data,
                            backgroundColor: ['#0F766E', '#0EA5E9', '#F59E0B', '#6366F1'],
                            borderWidth: 0
                        }]
                    },
                    options: { maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
                });
            }, 0);
        }

        function initCompChart(compData) {
            setTimeout(() => {
                const ctx = document.getElementById('compChart').getContext('2d');
                if (window.activeRadar) window.activeRadar.destroy();
                window.activeRadar = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['AI æŠ€æœ¯', 'æœ¬åœŸåŒ–', 'CSR', 'æ–°å“å‘å¸ƒ', 'ç”Ÿæ€åä½œ'],
                        datasets: [{
                            label: compData.name,
                            data: compData.scores,
                            backgroundColor: 'rgba(14, 165, 233, 0.2)',
                            borderColor: '#0EA5E9',
                            pointBackgroundColor: '#0EA5E9'
                        }]
                    },
                    options: { 
                        maintainAspectRatio: false, 
                        scales: { r: { suggestMin: 0, suggestMax: 10, ticks: { display: false } } }
                    }
                });
            }, 0);
        }

        // AI åŠŸèƒ½è§¦å‘
        async function generateSummary() {
            openModal("æ­£åœ¨å¤„ç†æ•´ä»½æŠ¥å‘Šï¼Œä¸ºæ‚¨æç‚¼ Q4 æ ¸å¿ƒæ´å¯Ÿ...");
            const res = await fetchAIAnalysis("åˆ†æ2025å¹´Q4åŒ»ç–—è®¾å¤‡æŠ¥å‘Šï¼Œç»™å‡º3æ¡ç»™è¥é”€é«˜ç®¡çš„æˆ˜ç•¥å»ºè®®ã€‚è¦æ±‚ç®€æ´æœ‰åŠ›ã€‚");
            updateModal(res);
        }

        async function marketDeepDive() {
            openModal("æ­£åœ¨åˆ†ææ”¿ç­–ä¸è¶‹åŠ¿çš„æ·±å±‚å…³è”...");
            const res = await fetchAIAnalysis("åˆ†æä¸­å›½åŒ»ç–—è®¾å¤‡'æŠ€è€—åˆ†ç¦»'æ”¿ç­–å¯¹é«˜ç«¯å½±åƒè®¾å¤‡å¸‚åœºçš„é•¿è¿œå½±å“ï¼Œå¹¶é¢„æµ‹2026å¹´çš„ç«äº‰è¶‹åŠ¿ã€‚");
            updateModal(res);
        }

        async function competitorDeepDive(name) {
            openModal(`æ­£åœ¨æ·±åº¦ç ”åˆ¤ ${name} çš„ç«äº‰ç­–ç•¥...`);
            const res = await fetchAIAnalysis(`é’ˆå¯¹ ${name} ç›®å‰çš„ MarCom ç­–ç•¥å’Œäº§å“ç»„åˆï¼Œåˆ†æå…¶åœ¨é¢å¯¹å›½äº§æ›¿ä»£æ½®æ—¶çš„ä¼˜åŠ£åŠ¿ã€‚`);
            updateModal(res);
        }

        // å¼¹çª—é€»è¾‘
        function openModal(text) {
            const modal = document.getElementById('ai-modal');
            const content = document.getElementById('ai-content');
            content.innerHTML = `<div class="flex flex-col items-center py-12"><div class="w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-4"></div><p class="text-indigo-600 font-bold animate-pulse">${text}</p></div>`;
            modal.classList.remove('hidden');
        }

        function updateModal(text) {
            const content = document.getElementById('ai-content');
            const formatted = text.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');
            content.innerHTML = `<div class="fade-in">${formatted}</div>`;
        }

        function closeModal() { document.getElementById('ai-modal').classList.add('hidden'); }

        // å¯åŠ¨
        render();
    </script>
</body>
</html>